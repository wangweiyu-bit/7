<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åç«¯ç®¡ç†é¢æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }
        
        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .api-list {
            display: grid;
            gap: 15px;
        }
        
        .api-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .api-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .method {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .get { background: #d4edda; color: #155724; }
        .post { background: #cce5ff; color: #004085; }
        .put { background: #fff3cd; color: #856404; }
        .delete { background: #f8d7da; color: #721c24; }
        
        .endpoint {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #495057;
        }
        
        .description {
            margin-top: 8px;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .test-area {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .test-area h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }
        
        .test-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .test-btn {
            padding: 10px 20px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .test-btn:hover {
            background: #1976d2;
        }
        
        .response {
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .online { background: #d4edda; color: #155724; }
        .offline { background: #f8d7da; color: #721c24; }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .feature-desc {
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ åç«¯ç®¡ç†é¢æ¿</h1>
            <p>Node.js + Express + SQLite åç«¯æœåŠ¡</p>
            <div id="status" class="status offline">ç¦»çº¿</div>
        </div>
        
        <div class="content">
            <!-- å¿«é€Ÿå¯åŠ¨ -->
            <div class="section">
                <h2>ğŸš€ å¿«é€Ÿå¯åŠ¨åç«¯</h2>
                <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="color: #2e7d32; margin-bottom: 15px;">ğŸ“‹ å¯åŠ¨æ­¥éª¤</h3>
                    <ol style="color: #333; line-height: 1.6;">
                        <li><strong>å®‰è£… Node.js</strong> - ä» <a href="https://nodejs.org" target="_blank">nodejs.org</a> ä¸‹è½½å®‰è£…</li>
                        <li><strong>å®‰è£…ä¾èµ–</strong> - åœ¨ backend ç›®å½•è¿è¡Œ: <code>npm install</code></li>
                        <li><strong>å¯åŠ¨æœåŠ¡</strong> - è¿è¡Œ: <code>node src/server.js</code></li>
                        <li><strong>æµ‹è¯•è¿æ¥</strong> - ç‚¹å‡»ä¸‹é¢çš„"æ£€æŸ¥æœåŠ¡çŠ¶æ€"æŒ‰é’®</li>
                    </ol>
                </div>
                
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <strong>ğŸ’¡ æç¤º:</strong> å¦‚æœåç«¯æœªè¿è¡Œï¼Œæ‰€æœ‰æµ‹è¯•æŒ‰é’®éƒ½ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚è¯·å…ˆæŒ‰ç…§ä¸Šè¿°æ­¥éª¤å¯åŠ¨åç«¯æœåŠ¡ã€‚
                </div>
            </div>
            
            <!-- ç³»ç»ŸçŠ¶æ€ -->
            <div class="section">
                <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ—„ï¸</div>
                        <div class="feature-title">æ•°æ®åº“</div>
                        <div class="feature-desc">SQLite æ•°æ®åº“<br>è‡ªåŠ¨è¿ç§»å’Œåˆå§‹åŒ–</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”</div>
                        <div class="feature-title">èº«ä»½éªŒè¯</div>
                        <div class="feature-desc">JWT Token<br>å¾®ä¿¡ OAuth ç™»å½•</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“</div>
                        <div class="feature-title">æ–‡ä»¶ä¸Šä¼ </div>
                        <div class="feature-desc">Multer ä¸­é—´ä»¶<br>æœ¬åœ°å­˜å‚¨</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ’¬</div>
                        <div class="feature-title">åŒ¿åäº’åŠ¨</div>
                        <div class="feature-desc">å¸–å­ã€è¯„è®ºã€ç‚¹èµ<br>åˆ†é¡µå’Œæœç´¢</div>
                    </div>
                </div>
            </div>
            
            <!-- è®¤è¯ç›¸å…³ API -->
            <div class="section">
                <h2>ğŸ” è®¤è¯ç›¸å…³ API</h2>
                <div class="api-list">
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/auth/register</span>
                        <div class="description">ç”¨æˆ·æ³¨å†Œï¼ˆéœ€è¦ç®¡ç†å‘˜å®¡æ ¸ï¼‰</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/auth/login</span>
                        <div class="description">ç”¨æˆ·ç™»å½•ï¼ˆé‚®ç®±/å¯†ç ï¼‰</div>
                    </div>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/auth/me</span>
                        <div class="description">è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯</div>
                    </div>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/auth/wechat/start</span>
                        <div class="description">å¾®ä¿¡ OAuth ç™»å½•å¼€å§‹</div>
                    </div>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/auth/wechat/callback</span>
                        <div class="description">å¾®ä¿¡ OAuth å›è°ƒå¤„ç†</div>
                    </div>
                </div>
            </div>
            
            <!-- ç®¡ç†å‘˜ API -->
            <div class="section">
                <h2>ğŸ‘‘ ç®¡ç†å‘˜ API</h2>
                <div class="api-list">
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/admin/users</span>
                        <div class="description">è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/admin/users/:id/approve</span>
                        <div class="description">å®¡æ ¸é€šè¿‡ç”¨æˆ·</div>
                    </div>
                </div>
            </div>
            
            <!-- åŒ¿åäº’åŠ¨ API -->
            <div class="section">
                <h2>ğŸ’¬ åŒ¿åäº’åŠ¨ API</h2>
                <div class="api-list">
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/anon/posts</span>
                        <div class="description">è·å–åŒ¿åå¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ï¼‰</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/anon/posts</span>
                        <div class="description">å‘å¸ƒåŒ¿åå¸–å­</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/anon/posts/:id/like</span>
                        <div class="description">ç‚¹èµå¸–å­</div>
                    </div>
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/anon/posts/:id/comments</span>
                        <div class="description">è·å–å¸–å­è¯„è®º</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/anon/posts/:id/comments</span>
                        <div class="description">æ·»åŠ è¯„è®º</div>
                    </div>
                </div>
            </div>
            
            <!-- æ–‡ä»¶ä¸Šä¼  API -->
            <div class="section">
                <h2>ğŸ“ æ–‡ä»¶ä¸Šä¼  API</h2>
                <div class="api-list">
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/upload</span>
                        <div class="description">ä¸Šä¼ æ–‡ä»¶ï¼ˆæ”¯æŒå¤šæ–‡ä»¶ï¼Œæœ€å¤§4ä¸ªï¼‰</div>
                    </div>
                </div>
            </div>
            
            <!-- é¢„çº¦ç³»ç»Ÿ API -->
            <div class="section">
                <h2>ğŸ“… é¢„çº¦ç³»ç»Ÿ API</h2>
                <div class="api-list">
                    <div class="api-item">
                        <span class="method get">GET</span>
                        <span class="endpoint">/api/bookings</span>
                        <div class="description">è·å–ç”¨æˆ·é¢„çº¦è®°å½•</div>
                    </div>
                    <div class="api-item">
                        <span class="method post">POST</span>
                        <span class="endpoint">/api/bookings</span>
                        <div class="description">åˆ›å»ºé¢„çº¦ï¼ˆbook/queue/cancel/checkinï¼‰</div>
                    </div>
                </div>
            </div>
            
            <!-- API æµ‹è¯•åŒºåŸŸ -->
            <div class="section">
                <h2>ğŸ§ª API æµ‹è¯•</h2>
                <div class="test-area">
                    <h3>åŸºç¡€åŠŸèƒ½æµ‹è¯•</h3>
                    <div class="test-buttons">
                        <button class="test-btn" onclick="testHealth()">æ£€æŸ¥æœåŠ¡çŠ¶æ€</button>
                        <button class="test-btn" onclick="testAnonPosts()">è·å–åŒ¿åå¸–å­</button>
                        <button class="test-btn" onclick="testCreatePost()">åˆ›å»ºæµ‹è¯•å¸–å­</button>
                        <button class="test-btn" onclick="testRegister()">æµ‹è¯•ç”¨æˆ·æ³¨å†Œ</button>
                    </div>
                    
                    <h3>é«˜çº§åŠŸèƒ½æµ‹è¯•</h3>
                    <div class="test-buttons">
                        <button class="test-btn" onclick="testAdminUsers()">ç®¡ç†å‘˜ç”¨æˆ·åˆ—è¡¨</button>
                        <button class="test-btn" onclick="testBookings()">é¢„çº¦ç³»ç»Ÿ</button>
                        <button class="test-btn" onclick="testUpload()">æ–‡ä»¶ä¸Šä¼ æ£€æŸ¥</button>
                    </div>
                    
                    <div id="response" class="response" style="display: none;"></div>
                </div>
            </div>
            
            <!-- å‰ç«¯é¡µé¢å¯¹åº” -->
            <div class="section">
                <h2>ğŸŒ å‰ç«¯é¡µé¢å¯¹åº”</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ </div>
                        <div class="feature-title">é¦–é¡µ</div>
                        <div class="feature-desc">index.html<br>å…¬å¼€è®¿é—®</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ‘¤</div>
                        <div class="feature-title">ä¼šå‘˜ä¸­å¿ƒ</div>
                        <div class="feature-desc">pages/members.html<br>éœ€è¦ç™»å½• + å®¡æ ¸</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ®</div>
                        <div class="feature-title">å¨±ä¹åŒº</div>
                        <div class="feature-desc">pages/fun.html<br>åŒ¿åäº’åŠ¨åŠŸèƒ½</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">â„¹ï¸</div>
                        <div class="feature-title">å…³äºæˆ‘</div>
                        <div class="feature-desc">pages/about.html<br>ä¸ªäººä»‹ç»é¡µé¢</div>
                    </div>
                </div>
                
                <div style="background: #f0f8ff; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h3 style="color: #1976d2; margin-bottom: 15px;">ğŸ”— åŠŸèƒ½å¯¹åº”å…³ç³»</h3>
                    <ul style="color: #333; line-height: 1.8;">
                        <li><strong>ä¼šå‘˜é¢„çº¦</strong> â†’ <code>/api/bookings</code> (POST/GET)</li>
                        <li><strong>åŒ¿åå‘å¸–</strong> â†’ <code>/api/anon/posts</code> (POST/GET)</li>
                        <li><strong>åŒ¿åè¯„è®º</strong> â†’ <code>/api/anon/posts/:id/comments</code> (POST/GET)</li>
                        <li><strong>åŒ¿åç‚¹èµ</strong> â†’ <code>/api/anon/posts/:id/like</code> (POST)</li>
                        <li><strong>æ–‡ä»¶ä¸Šä¼ </strong> â†’ <code>/api/upload</code> (POST)</li>
                        <li><strong>ç”¨æˆ·ç™»å½•</strong> â†’ <code>/api/auth/login</code> (POST)</li>
                        <li><strong>å¾®ä¿¡ç™»å½•</strong> â†’ <code>/api/auth/wechat/start</code> (GET)</li>
                    </ul>
                </div>
            </div>
            
            <!-- æ•°æ®åº“è¡¨ç»“æ„ -->
            <div class="section">
                <h2>ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„</h2>
                <div class="api-list">
                    <div class="api-item">
                        <strong>users</strong> - ç”¨æˆ·è¡¨
                        <div class="description">id, email, password, name, role, approved, wechat_openid, session_version, active_device_id, created_at</div>
                    </div>
                    <div class="api-item">
                        <strong>oauth_states</strong> - OAuth çŠ¶æ€è¡¨
                        <div class="description">state, created_at</div>
                    </div>
                    <div class="api-item">
                        <strong>bookings</strong> - é¢„çº¦è¡¨
                        <div class="description">id, user_id, date, slot_id, name, phone, action, status, created_at</div>
                    </div>
                    <div class="api-item">
                        <strong>anon_posts</strong> - åŒ¿åå¸–å­è¡¨
                        <div class="description">id, board, device_id, title, content, tags, media, likes_count, comments_count, status, created_at</div>
                    </div>
                    <div class="api-item">
                        <strong>anon_comments</strong> - åŒ¿åè¯„è®ºè¡¨
                        <div class="description">id, post_id, device_id, content, created_at</div>
                    </div>
                    <div class="api-item">
                        <strong>anon_likes</strong> - åŒ¿åç‚¹èµè¡¨
                        <div class="description">id, post_id, device_id, created_at</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
        async function checkStatus() {
            try {
                const response = await fetch('http://localhost:8080/api/health');
                if (response.ok) {
                    document.getElementById('status').textContent = 'åœ¨çº¿';
                    document.getElementById('status').className = 'status online';
                } else {
                    throw new Error('æœåŠ¡å¼‚å¸¸');
                }
            } catch (error) {
                document.getElementById('status').textContent = 'ç¦»çº¿';
                document.getElementById('status').className = 'status offline';
            }
        }
        
        // æµ‹è¯•å¥åº·æ£€æŸ¥
        async function testHealth() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨æ£€æŸ¥åç«¯æœåŠ¡...';
            
            try {
                const response = await fetch('http://localhost:8080/api/health');
                if (response.ok) {
                    const data = await response.json();
                    responseDiv.textContent = `âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ\nçŠ¶æ€ç : ${response.status}\nå“åº”: ${JSON.stringify(data, null, 2)}`;
                    document.getElementById('status').textContent = 'åœ¨çº¿';
                    document.getElementById('status').className = 'status online';
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                responseDiv.textContent = `âŒ åç«¯æœåŠ¡æœªè¿è¡Œ\né”™è¯¯: ${error.message}\n\nè¯·å…ˆå¯åŠ¨åç«¯æœåŠ¡:\n1. å®‰è£… Node.js\n2. åœ¨ backend ç›®å½•è¿è¡Œ: npm install\n3. è¿è¡Œ: node src/server.js`;
                document.getElementById('status').textContent = 'ç¦»çº¿';
                document.getElementById('status').className = 'status offline';
            }
        }
        
        // æµ‹è¯•åŒ¿åå¸–å­
        async function testAnonPosts() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨è·å–åŒ¿åå¸–å­åˆ—è¡¨...';
            
            try {
                const response = await fetch('http://localhost:8080/api/anon/posts?board=dating&page=1&pageSize=5');
                const data = await response.json();
                
                if (response.ok) {
                    responseDiv.textContent = `âœ… åŒ¿åå¸–å­APIæ­£å¸¸\nçŠ¶æ€ç : ${response.status}\n\nå¸–å­æ•°é‡: ${data.posts ? data.posts.length : 0}\næ€»é¡µæ•°: ${data.totalPages || 0}\n\nå“åº”æ•°æ®:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    responseDiv.textContent = `âŒ APIè°ƒç”¨å¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}`;
                }
            } catch (error) {
                responseDiv.textContent = `âŒ ç½‘ç»œé”™è¯¯\né”™è¯¯: ${error.message}\n\nè¯·ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ`;
            }
        }
        
        // æµ‹è¯•åˆ›å»ºåŒ¿åå¸–å­
        async function testCreatePost() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨åˆ›å»ºæµ‹è¯•å¸–å­...';
            
            try {
                const testPost = {
                    board: 'dating',
                    title: 'æµ‹è¯•å¸–å­ - ' + new Date().toLocaleString(),
                    content: 'è¿™æ˜¯ä¸€ä¸ªé€šè¿‡åç«¯ç®¡ç†é¢æ¿åˆ›å»ºçš„æµ‹è¯•å¸–å­',
                    tags: 'æµ‹è¯•,åç«¯,ç®¡ç†é¢æ¿'
                };
                
                const response = await fetch('http://localhost:8080/api/anon/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Device-Id': 'test-device-' + Date.now()
                    },
                    body: JSON.stringify(testPost)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    responseDiv.textContent = `âœ… å¸–å­åˆ›å»ºæˆåŠŸ\nçŠ¶æ€ç : ${response.status}\n\nå¸–å­ID: ${data.id}\næ ‡é¢˜: ${data.title}\n\nå“åº”æ•°æ®:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    responseDiv.textContent = `âŒ å¸–å­åˆ›å»ºå¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}`;
                }
            } catch (error) {
                responseDiv.textContent = `âŒ ç½‘ç»œé”™è¯¯\né”™è¯¯: ${error.message}`;
            }
        }
        
        // æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
        async function testRegister() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨æµ‹è¯•ç”¨æˆ·æ³¨å†Œ...';
            
            try {
                const testUser = {
                    email: 'test@example.com',
                    password: 'test123456',
                    name: 'æµ‹è¯•ç”¨æˆ·'
                };
                
                const response = await fetch('http://localhost:8080/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testUser)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    responseDiv.textContent = `âœ… ç”¨æˆ·æ³¨å†ŒæˆåŠŸ\nçŠ¶æ€ç : ${response.status}\n\nç”¨æˆ·ID: ${data.user.id}\né‚®ç®±: ${data.user.email}\nå®¡æ ¸çŠ¶æ€: ${data.user.approved ? 'å·²å®¡æ ¸' : 'å¾…å®¡æ ¸'}\n\nå“åº”æ•°æ®:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    responseDiv.textContent = `âŒ ç”¨æˆ·æ³¨å†Œå¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}`;
                }
            } catch (error) {
                responseDiv.textContent = `âŒ ç½‘ç»œé”™è¯¯\né”™è¯¯: ${error.message}`;
            }
        }
        
        // æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 
        async function testUpload() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ–‡ä»¶ä¸Šä¼ æµ‹è¯•éœ€è¦å®é™…æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨å‰ç«¯é¡µé¢æµ‹è¯•\n\næˆ–è€…å¯ä»¥æ£€æŸ¥ä¸Šä¼ ç›®å½•æ˜¯å¦å­˜åœ¨...';
            
            try {
                // æ£€æŸ¥ä¸Šä¼ ç›®å½•æ˜¯å¦å­˜åœ¨
                const response = await fetch('http://localhost:8080/api/health');
                if (response.ok) {
                    responseDiv.textContent += `\n\nâœ… åç«¯æœåŠ¡æ­£å¸¸ï¼Œæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½åº”è¯¥å¯ç”¨\nä¸Šä¼ è·¯å¾„: backend/uploads/`;
                }
            } catch (error) {
                responseDiv.textContent += `\n\nâŒ åç«¯æœåŠ¡æœªè¿è¡Œ`;
            }
        }
        
        // æµ‹è¯•ç®¡ç†å‘˜åŠŸèƒ½
        async function testAdminUsers() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨è·å–ç”¨æˆ·åˆ—è¡¨...';
            
            try {
                const response = await fetch('http://localhost:8080/api/admin/users');
                const data = await response.json();
                
                if (response.ok) {
                    responseDiv.textContent = `âœ… ç®¡ç†å‘˜APIæ­£å¸¸\nçŠ¶æ€ç : ${response.status}\n\nç”¨æˆ·æ•°é‡: ${data.users ? data.users.length : 0}\n\nå“åº”æ•°æ®:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    responseDiv.textContent = `âŒ ç®¡ç†å‘˜APIè°ƒç”¨å¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}\n\næ³¨æ„: éœ€è¦ç®¡ç†å‘˜æƒé™`;
                }
            } catch (error) {
                responseDiv.textContent = `âŒ ç½‘ç»œé”™è¯¯\né”™è¯¯: ${error.message}`;
            }
        }
        
        // æµ‹è¯•é¢„çº¦ç³»ç»Ÿ
        async function testBookings() {
            const responseDiv = document.getElementById('response');
            responseDiv.style.display = 'block';
            responseDiv.textContent = 'æ­£åœ¨æµ‹è¯•é¢„çº¦ç³»ç»Ÿ...';
            
            try {
                const response = await fetch('http://localhost:8080/api/bookings');
                const data = await response.json();
                
                if (response.ok) {
                    responseDiv.textContent = `âœ… é¢„çº¦ç³»ç»ŸAPIæ­£å¸¸\nçŠ¶æ€ç : ${response.status}\n\né¢„çº¦æ•°é‡: ${data.bookings ? data.bookings.length : 0}\n\nå“åº”æ•°æ®:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    responseDiv.textContent = `âŒ é¢„çº¦ç³»ç»ŸAPIè°ƒç”¨å¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}\n\næ³¨æ„: éœ€è¦ç™»å½•æƒé™`;
                }
            } catch (error) {
                responseDiv.textContent = `âŒ ç½‘ç»œé”™è¯¯\né”™è¯¯: ${error.message}`;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        window.onload = function() {
            checkStatus();
            // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡çŠ¶æ€
            setInterval(checkStatus, 30000);
        };
    </script>
</body>
</html>
